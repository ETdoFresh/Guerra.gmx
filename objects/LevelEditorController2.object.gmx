<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Resize Window

var newWidth = window_get_width() * .80;
var newHeight = window_get_height() * .80;
window_set_size(newWidth, newHeight);
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Tools and First Selection

DRAWBARBWIRE = 1;
DRAWMINE = 2;
DRAWGUN = 3;
DRAWFLAG = 4;
DRAWFINISH = 5;
ERASER = 0;
SELECT = 0;

_currentTool = DRAWBARBWIRE;

_isDrawing = false;

_lastPointX = -1000;
_lastPointY = -1000;

_undoList = ds_list_create();
_actionList = ds_list_create();
_bulletList = ds_list_create();
_redoList = ds_list_create();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Draw Barbwire

if (_isDrawing &amp;&amp; _currentTool == DRAWBARBWIRE)
{
    var dx = mouse_x - _lastPointX;
    var dy = mouse_y - _lastPointY;
    var distance = point_distance(mouse_x, mouse_y, _lastPointX, _lastPointY);
    
    while (distance &gt;= 24)
    {
        dx = dx / distance * 24 + _lastPointX;
        dy = dy / distance * 24 + _lastPointY;
        var barbwire = instance_create(dx, dy, BarbwireObject);
        barbwire.image_angle = point_direction(mouse_x, mouse_y, _lastPointX, _lastPointY);
        _lastPointX = dx;
        _lastPointY = dy;
        
        ds_list_add(_actionList, BarbwireObject);
        ds_list_add(_actionList, barbwire.x);
        ds_list_add(_actionList, barbwire.y);
        ds_list_add(_actionList, barbwire.image_angle);
        
        dx = mouse_x - _lastPointX;
        dy = mouse_y - _lastPointY;
        distance = point_distance(mouse_x, mouse_y, _lastPointX, _lastPointY);
    }
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Draw Mine

if (_isDrawing &amp;&amp; _currentTool == DRAWMINE)
{
    _selected.x = mouse_x;
    _selected.y = mouse_y;
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Draw Gun

if (_isDrawing &amp;&amp; _currentTool == DRAWGUN)
{
    var pointDirection = point_direction(_selected.x, _selected.y, mouse_x, mouse_y);
    _selected.image_angle = pointDirection;
    
    if (90 &lt; _selected.image_angle &amp;&amp; _selected.image_angle &lt; 270)
        _selected.image_yscale = -1;
    else
        _selected.image_yscale = 1;
        
    // Iteration of making bullets
    var distance = point_distance(_selected.x, _selected.y, mouse_x, mouse_y);
    var numberOfBullets = 0;
    var bulletWidth = sprite_get_width(BulletSprite);
    var bulletWidthAndSpacing = bulletWidth + 32;
    var gunBarrelX = _selected.x;
    var gunBarrelY = _selected.y;
    
    distance = distance - _selected.sprite_width / 2;
    if (distance &gt; 0)
    {
        numberOfBullets = ceil(distance / bulletWidthAndSpacing);
        distance = distance / numberOfBullets;
    }
                
    while (ds_list_size(_bulletList) &gt; numberOfBullets)
    {
        var bullet = ds_list_find_value(_bulletList, 0);
        with (bullet) instance_destroy();
        ds_list_delete(_bulletList, 0);
    }
    
    while (ds_list_size(_bulletList) &lt; numberOfBullets)
        ds_list_add(_bulletList, instance_create(0, 0, BulletObject));
    
    for (var i = 0; i &lt; ds_list_size(_bulletList); i++)
    {
        var bullet = ds_list_find_value(_bulletList, i);
        bullet.x = gunBarrelX + lengthdir_x(distance * (i + 1), pointDirection);
        bullet.y = gunBarrelY + lengthdir_y(distance * (i + 1), pointDirection);
        bullet.image_angle = pointDirection;
    }    
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Draw Flag

if (_isDrawing &amp;&amp; _currentTool == DRAWFLAG)
{
    _selected.x = mouse_x;
    _selected.y = mouse_y;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="56">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Check if Mines overlap

if (_isDrawing &amp;&amp; _currentTool == DRAWMINE)
{
    with (_selected)
    {
        if (place_meeting(x, y, all))
        {
            var message = instance_create(room_width / 2, room_height / 2, PopUpMessageObject);
            message.MyText = "Cannot place Mine on top of another object";
            ds_list_clear(other._actionList);
            instance_destroy();
        }
        else
        {
            ds_list_add(other._actionList, MineObject);
            ds_list_add(other._actionList, x);
            ds_list_add(other._actionList, y);
            ds_list_add(other._actionList, image_angle);
        }
    }
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Finish Drawing Gun

if (_isDrawing &amp;&amp; _currentTool == DRAWGUN)
{
    ds_list_add(_actionList, GunObject);
    ds_list_add(_actionList, _selected.x);
    ds_list_add(_actionList, _selected.y);
    ds_list_add(_actionList, _selected.image_angle);

    for (var i = 0; i &lt; ds_list_size(_bulletList); i++)
    {
        var bullet = ds_list_find_value(_bulletList, i);
        ds_list_add(_actionList, BulletObject);
        ds_list_add(_actionList, bullet.x);
        ds_list_add(_actionList, bullet.y);
        ds_list_add(_actionList, bullet.image_angle);
    }
    
    ds_list_clear(_bulletList);
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Check if Flag overlap anything

if (_isDrawing &amp;&amp; _currentTool == DRAWFLAG)
{
    with (_selected)
    {
        if (place_meeting(x, y, all))
        {
            var message = instance_create(room_width / 2, room_height / 2, PopUpMessageObject);
            message.MyText = "Cannot place Flag on top of another object";
            ds_list_clear(other._actionList);
            instance_destroy();
        }
        else
        {
            ds_list_add(other._actionList, FlagObject);
            ds_list_add(other._actionList, x);
            ds_list_add(other._actionList, y);
            ds_list_add(other._actionList, image_angle);
        }
    }
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Stop Drawing

_isDrawing = false;
_selected = 0;

if (ds_list_size(_actionList) &gt; 1)
{
    ds_list_add(_undoList, _actionList);
    _actionList = ds_list_create();
}

ds_list_clear(_actionList);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="53">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Start Drawing

if (position_empty(mouse_x, mouse_y))
{
    _isDrawing = true;
    ds_list_add(_actionList, "Create");
    
    // Clear Redo List
    while(ds_list_size(_redoList) &gt; 0)
    {
        var actionList = ds_list_find_value(_redoList, 0);
        ds_list_clear(actionList);
        ds_list_delete(_redoList, 0);
    }
}

_lastPointX = mouse_x;
_lastPointY = mouse_y;
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Start Drawing Mine

if (_isDrawing &amp;&amp; _currentTool == DRAWMINE)
{
    _selected = instance_create(mouse_x, mouse_y, MineObject);
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Start Drawing Gun

if (_isDrawing &amp;&amp; _currentTool == DRAWGUN)
{
    _selected = instance_create(mouse_x, mouse_y, GunObject);
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Start Drawing Flag

if (_isDrawing &amp;&amp; _currentTool == DRAWFLAG)
{
    if (!instance_exists(FlagObject))
    {
        _selected = instance_create(mouse_x, mouse_y, FlagObject);
    }
    else
    {
        _selected = instance_find(FlagObject, 0);
        ds_list_clear(_actionList);
        ds_list_add(_actionList, "Move");
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="11">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Redo Action

if (ds_list_size(_redoList) &gt; 0)
{
    // Pop the value (get the value and delete last list value)
    var actionList = ds_list_find_value(_redoList, ds_list_size(_redoList) - 1);
    ds_list_delete(_redoList, ds_list_size(_redoList) - 1);
    
    // Default Variables
    var action = "Nothing";
    var i;
    
    // Get Action
    if (ds_list_size(actionList) &gt; 0)
        action = ds_list_find_value(actionList, 0);
    
    // Do stuff with actions
    if (action == "Create")
    {
        for (i = 1; i &lt; ds_list_size(actionList); i += 4)
        {
            var objType = ds_list_find_value(actionList, i);
            var instX = ds_list_find_value(actionList, i + 1);
            var instY = ds_list_find_value(actionList, i + 2);
            var instAngle = ds_list_find_value(actionList, i + 3);

            var instance = instance_create(instX, instY, objType);
            instance.image_angle = instAngle;
            
            if (objType == GunObject &amp;&amp; 
            90 &lt; instance.image_angle &amp;&amp; instance.image_angle &lt; 270)
                instance.image_yscale = -1;
        }
    }
    
    ds_list_add(_undoList, actionList);
}
// Show message if no Undos left
else
{
    var message = instance_create(room_width / 2, room_height / 2, PopUpMessageObject);
    message.MyText = "There are no more actions to Redo";
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Undo Action

if (ds_list_size(_undoList) &gt; 0)
{
    // Pop the value (get the value and delete last list value)
    var actionList = ds_list_find_value(_undoList, ds_list_size(_undoList) - 1);
    ds_list_delete(_undoList, ds_list_size(_undoList) - 1);
    
    // Default Variables
    var action = "Nothing";
    var i;
    
    // Get Action
    if (ds_list_size(actionList) &gt; 0)
        action = ds_list_find_value(actionList, 0);
    
    // Do stuff with actions
    if (action == "Create")
    {
        for (i = 1; i &lt; ds_list_size(actionList); i += 4)
        {
            var objType = ds_list_find_value(actionList, i);
            var instX = ds_list_find_value(actionList, i + 1);
            var instY = ds_list_find_value(actionList, i + 2);
            var instAngle = ds_list_find_value(actionList, i + 3);
            
            var instance = instance_nearest(instX, instY, objType); // Implement Type Later

            show_debug_message(instance);
            
            with (instance)
                instance_destroy();
        }
    }
    
    ds_list_add(_redoList, actionList);
}
// Show message if no Undos left
else
{
    var message = instance_create(room_width / 2, room_height / 2, PopUpMessageObject);
    message.MyText = "There are no more actions to Undo";
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="73">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>show_debug_message("Number of Instances: " + string(instance_number(all)));
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
